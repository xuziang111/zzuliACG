<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="">
    <title>时间轴</title>
    <!--动漫协会官网基础样式文件,start-->
    <!--OwlCarousel2-->
    <link href="https://cdn.bootcss.com/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="https://cdn.bootcss.com/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css" rel="stylesheet">
    <!-- Bootstrap -->
    <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!--BaseCSS-->
    <link href="CSS/templateBase.css" rel="stylesheet">
    <!--动漫协会官网基础样式文件,end-->
    <!--*********************************************************************************************-->
    <!--此处引入你的外部CSS文件，start ↓↓↓↓↓↓↓↓↓-->
    <!--例如：<link href="CSS/xxx.css" rel="stylesheet">-->


    <!--此处引入你的外部CSS文件，end   ↑↑↑↑↑↑↑↑↑-->
    <!--*********************************************************************************************-->
    <!--此处style标签输入你的CSS样式，start-->
    <style>
        #tf-home {
            background:url(Images/66474729_p0.jpg);
            background-size:cover;
            background-position:center;
            background-attachment:fixed;
            background-repeat:no-repeat;
            color:#cfcfcf;
        }
        #tf-home .overlay {
            /*网页主体高度*/
            height:2500px;
        }
        /*居中内容块*/
        #body-container.container {
            border: 1px solid #99CCFF;
            background-color: rgba(153,204,255,0.1);
        }
        .content {
            position:relative;
            /*响应式标记，全改为20%*/
            padding:6% 0 0;
        }
        @media (max-width: 640px){
            .content {
                padding:30% 0 0;
            }
        }
        @media (max-width: 960px){
            .content {
                padding:15% 0 0;
            }
        }
        .container{
            /*响应式标记，全改为15px*/
            padding-left: 0px;
            padding-right: 0px;
        }
        @media (max-width: 768px){
            .container {
                padding-left: 15px;
                padding-right: 15px;
            }
        }


    </style>
    <!--此处引入你的外部CSS文件，end-->
    <link href="CSS/main.css" rel="stylesheet">
    <!--*********************************************************************************************-->
</head>
<body>
<!-- Navigation 样式占位，用于大体预览网页效果，此处不用修改
==========================================-->
<nav id="tf-menu" class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
        <!-- 移动设备显示的导航部分 -->
        <div class="navbar-header">
            <h1>导航样式占位，用于大体预览网页效果，此处不用修改</h1>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>
<!--==========================================-->
<!--*********************************************************************************************-->
<!-- Home Page 在此处修改你的内容
==========================================-->
<div id="tf-home" class="text-center">
    <div class="overlay">
        <div class="content"><!--此处为内容块的总标题，根据需要删减修改-->
            <h1>郑州轻工业大学<strong><span class="color">动漫协会</span></strong></h1>
            <!--fa小图标使用方法百度font-awesome即可-->
            <p class="lead">此处内容块副标题，根据自己的需要进行修改<i class="fa fa-exclamation-triangle fa-1x" aria-hidden="true"></i></p>
        </div>


        <header class="site-header">
          <div class="wrapper">
            <h1 class="site-header__title">时间轴</h1>
          </div>
          <div class="year-time">
              <ul>
                <li><a href="#2016">2016</a></li>
                <li><a href="#2017">2017</a></li>
                <li><a href="#2018">2018</a></li>
              </ul>
            </div>
        </header>
        <section class="timeline">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div class="VivaTimeline">
                          <ul class="content">
                            <li>
                              <h2>这里是2016</h2>
                                <dl>

                                </dl>
                            </li>
                            <li><h2>这里是2017</h2>                                <dl>

                              </dl></li>
                            <li><h2>这里是2018</h2>                                <dl>

                              </dl></li>
                          </ul>
                        </div>
                    </div>
                </div>
            </div>
        
        
        </section>
        
    </div>
</div>
<!--==========================================-->
<!--*********************************************************************************************-->
<!-- Footer 样式占位，用于大体预览网页效果，此处不用修改
==========================================-->
<footer id="footer">
  <div class="container">
      <div class="pull-left fnav">
          <p>本网站提供新影视资源均系收集各大网站，本网站只提供web页面浏览服务，并不提供影片资源存储，也不参与任何视频录制、上传</p>
          <p>若本站收集的节目无意侵犯了贵司版权，请给<a href="mailto:1025212779@qq.com">1025212779@qq.com</a>邮箱地址来信，我们将在第一时间删除相应资源</p>
          <p>Copyright &copy; 2018.郑州轻工业大学 动漫协会 All rights reserved.</p>
      </div>
      <div class="pull-right fnav">
          <ul class="footer-social">
              <li><a href="#"><i class="fa fa-warning"></i>社团官网施工中...</a></li>
          </ul>
      </div>
  </div>
</footer>
<!--==========================================-->
<!--*********************************************************************************************-->

<!--JS,start-->
<!--==========================================-->
<!--以下JS插件，可通过注释来选择。使用方法可百度-->
<!--JQ-->
<script type="text/javascript" src="JavaScript/1.12.4.jquery.min.js"></script>
<script type="text/javascript" src="JavaScript/jquery.waypoints.min.js"></script>

<!--Boostrap's JS-->
<script type="text/javascript" src="JavaScript/3.3.7bootstrap.min.js"></script>
<!--页面中的平滑滚动插件-->
<script type="text/javascript" src="https://cdn.bootcss.com/smoothscroll/1.4.6/SmoothScroll.min.js"></script>
<!--jQuery智能布局插件 Isotope -->
<script type="text/javascript" src="https://cdn.bootcss.com/jquery.isotope/1.5.25/jquery.isotope.min.js"></script>
<!--JQ幻灯片插件-->
<script type="text/javascript" src="JavaScript/2.3.4owl.carousel.min.js"></script>
<!--动漫协会官网基础JS-->
<!-- <script type="text/javascript" src="http://www.zzuliacgn.cf/static/BaseJs.js"></script> -->
<!--*********************************************************************************************-->
<!--此处追加你要增加的外部JS文件标签，start ↓↓↓↓↓↓↓↓↓-->
<!--例如：<script type="text/javascript" src="JavaScript/xxx.js"></script>-->

<!--此处追加你要增加的外部JS文件地址，end   ↑↑↑↑↑↑↑↑↑-->
<!--*********************************************************************************************-->
<!--在以下script标签中追加你的js代码，start  ↓↓↓↓↓↓↓↓↓-->
<script src="JavaScript/3.3.7bootstrap.min.js"></script>
<script src="JavaScript/jquery.eeyellow.Timeline.js"></script>
<script type="text/javascript">
  function customWayPoint(className, addClassName, customOffset) {
    var waypoints = $(className).waypoint({
      handler: function(direction) {
        if (direction == "down") {
          $(className).addClass(addClassName);
        } else {
          $(className).removeClass(addClassName);
        }
      },
      offset: customOffset
    });
  }
  
  var defaultOffset = '80%';
  let datas = [{
    month:'Feb 2016',
    time:'Jan 21',
    header:'A Very Very Looooooooooooooooooooong Event Heading',
    images:[{
      src:'images/cat01.png',
      desc:'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.',
    },{
      src:'images/cat02.png',
      desc:'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.',
    }]
  },{
    month:'Feb 2016',
    time:'Jan 21',
    header:'A Very Very Looooooooooooooooooooong Event Heading',
    images:[{
      src:'images/cat01.png',
      desc:'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.',
    },{
      src:'images/cat02.png',
      desc:'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.',
    }]
  },{
    month:'Feb 2016',
    time:'Jan 21',
    header:'A Very Very Looooooooooooooooooooong Event Heading',
    images:[{
      src:'images/cat01.png',
      desc:'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.',
    },{
      src:'images/cat02.png',
      desc:'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.',
    }]
  }]
  function ajaxsuccess(data){
  let temp,dd1,dd2,dd3
  temp = ``
  data.forEach((e,index) => {
    dd1=`
  <dd class="item item${index+1} pos-right clearfix">
    <div class="month">${e.month}</div>
    <div class="circ"></div>
    <div class="events">
      <div class="time">${e.time}</div>
      <div class="events-header">${e.header}</div>
      <div class="events-body">
  `
dd2 =  eventloop(e.images)
dd3 = `</div>
              <div class="events-footer">
        
              </div>
            </div>
          </dd>`
    dd = dd1 + dd2 + dd3 
    temp = temp + dd
});
let index = location.hash || '#2016'

index = index.substring(1)
    index = index - 2016
    console.log(index)
$('.content >li>dl').eq(index).append(temp)
customWayPoint('.item', 'active', defaultOffset);


}
  $(document).ready(function () {
      $('.VivaTimeline').vivaTimeline({
          carousel: true,
          carouselTime: 3000
      });
  });

  selectTab()

window.onhashchange = (e)=>{
selectTab()
}

function selectTab(){
    let index = location.hash || '#2016'
    index = index.substring(1)
    index = index - 2016
    $('.year-time > ul >li').eq(index).addClass('active')
        .siblings().removeClass('active')
    $('.content >li').eq(index).addClass('active')
        .siblings().removeClass('active')
        let user = document.cookie
        let temp={hash:location.hash}
        temp=JSON.stringify(temp)
        console.log(temp)
  $.ajax({
      type: "post",
      url: "/loadingtimeline",
      data: temp, 
      processData: false,    //false
      cache: false,    //缓存
      beforeSend:function(){//用来测试列表是否会被更改，上线时移到success中
        ajaxsuccess(datas)
      },
      success: function(data){
        // ajaxsuccess(data)
      },
      error:function(){
          console.log('error')
      },
      complete:function(){

      }
  })
      }

function eventloop(images){
  let temp = ` `
  images.forEach((e,index) => {
    temp = temp + `
    <div class="row">
      <div class="col-md-6 pull-right">
        <img class="events-object img-responsive img-rounded" src="${e.src}" />
      </div>
      <div class="events-desc">
        ${e.desc}
      </div>
    </div>
    `
  });
  return temp
}

</script>
<script>

  
  // for (i = 1; i < 17; i++) {
  //   customWayPoint('.item' + i, 'active', defaultOffset);
  // }
  </script>
<!--在以下script标签中追加你的js代码，end    ↑↑↑↑↑↑↑↑↑-->
<!--*********************************************************************************************-->
<!--JS,end-->
</body>
</html>